<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§‚å±±æ‚¦æ°´æ™¶ - è´¹ç”¨è®¡ç®—å™¨</title>
    <style>
        :root {
            --primary-color: #6a1b9a; /* æ·±ç´« */
            --secondary-color: #9c27b0; /* ç´«è‰² */
            --accent-color: #e1bee7; /* æµ…ç´« */
            --highlight-bg: #ffeb3b; /* é«˜äº®èƒŒæ™¯è‰² (é»„è‰²) */
            --highlight-text: #d50000; /* é«˜äº®æ–‡å­—è‰² (çº¢è‰²) */
            --text-color: #333;
            --bg-gradient: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
        }

        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: var(--bg-gradient);
            color: var(--text-color);
            min-height: 100vh;
        }

        /* å¯¼èˆªæ æ ·å¼ */
        .navbar {
            background-color: var(--primary-color);
            overflow: hidden;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: flex;
            justify-content: center;
        }

        .navbar a {
            float: left;
            display: block;
            color: white;
            text-align: center;
            padding: 14px 20px;
            text-decoration: none;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        .navbar a:hover {
            background-color: var(--secondary-color);
        }

        .navbar a.active {
            background-color: var(--secondary-color);
            font-weight: bold;
            border-bottom: 3px solid var(--accent-color);
        }

        /* ä¸»å®¹å™¨ */
        .container {
            max-width: 600px;
            margin: 20px auto;
            padding: 0 15px;
        }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(106, 27, 154, 0.15);
            border: 1px solid rgba(156, 39, 176, 0.2);
        }

        .card h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
            margin-top: 0;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
        }
        
        .card h2::before {
            content: 'ğŸ”®';
            margin-right: 8px;
        }

        /* è¡¨å•å…ƒç´  */
        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
            font-size: 0.9rem;
        }

        input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 16px; /* é˜²æ­¢iOSæ”¾å¤§ */
            outline: none;
        }

        input[type="number"]:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 2px rgba(156, 39, 176, 0.2);
        }

        button {
            width: 100%;
            background-color: var(--secondary-color);
            color: white;
            padding: 14px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: var(--primary-color);
        }

        /* ç»“æœåŒºåŸŸ */
        .result-box {
            display: none; /* é»˜è®¤éšè— */
            margin-top: 20px;
            background-color: #f8f0fa;
            border-radius: 10px;
            padding: 15px;
            border-left: 5px solid var(--primary-color);
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed #ddd;
            font-size: 0.95rem;
        }

        .result-item:last-child {
            border-bottom: none;
        }
        
        /* æ ¸å¿ƒæ•°æ®é«˜äº®æ ·å¼ */
        .highlight-important {
            background-color: var(--highlight-bg);
            color: var(--highlight-text);
            font-weight: bold;
            padding: 5px;
            border-radius: 4px;
        }
        
        .highlight-notice {
            margin-top: 15px;
            padding: 10px;
            background-color: #e3f2fd; /* è“è‰²èƒŒæ™¯ */
            color: #0d47a1;
            border-radius: 8px;
            font-size: 0.9rem;
            line-height: 1.5;
            border: 1px solid #bbdefb;
        }

        .highlight-price-show {
            font-size: 1.5rem;
            color: var(--primary-color);
            text-align: center;
            font-weight: bold;
            padding: 20px 0;
        }

        /* å°æ ‡é¢˜æç¤º */
        .section-desc {
            font-size: 0.8rem;
            color: #777;
            margin-bottom: 10px;
        }

        @media (max-width: 400px) {
            .navbar a {
                padding: 14px 10px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>

    <!-- å¯¼èˆªæ  -->
    <div class="navbar">
        <a href="index.html" class="active">è®¡ç®—å™¨</a>
        <a href="sj.html">æ°´æ™¶å±•ç¤º</a>
        <a href="fs.html">é£æ°´æ‘†ä»¶</a>
    </div>

    <div class="container">
        
        <!-- ç¬¬ä¸€éƒ¨åˆ†ï¼šé¢„ç®—åæ¨åˆ©æ¶¦ -->
        <div class="card">
            <h2>é¢„ç®—åæ¨è®¡ç®—</h2>
            <div class="section-desc">è¾“å…¥å®¢æˆ·é¢„ç®—ï¼Œè®¡ç®—å„é¡¹æˆæœ¬ä¸åˆ†é…</div>
            <div class="form-group">
                <label>å®¢æˆ·é¢„ç®—ä»·æ ¼ (å…ƒ)</label>
                <input type="number" id="budgetPrice" placeholder="è¯·è¾“å…¥å®¢æˆ·æ€»é¢„ç®—">
            </div>
            <button onclick="calculateBudget()">å¼€å§‹è®¡ç®—</button>

            <div id="resultBudget" class="result-box">
                <!-- ç»“æœå°†åœ¨è¿™é‡Œç”Ÿæˆ -->
            </div>
        </div>

        <!-- ç¬¬äºŒéƒ¨åˆ†ï¼šæŠ¥ä»·è®¡ç®— -->
        <div class="card">
            <h2>æ°´æ™¶æŠ¥ä»·è®¡ç®—</h2>
            <div class="section-desc">è¾“å…¥æ°´æ™¶è¿›è´§ä»·ï¼Œè®¡ç®—ç»™å®¢æˆ·çš„æŠ¥ä»·</div>
            <div class="form-group">
                <label>æ°´æ™¶è¿›è´§ä»·æ ¼ (å…ƒ)</label>
                <input type="number" id="crystalBasePrice" placeholder="è¯·è¾“å…¥æ°´æ™¶è¿›è´§ä»·">
            </div>
            <button onclick="calculateQuote()">ç”ŸæˆæŠ¥ä»·</button>

            <div id="resultQuote" class="result-box">
                <!-- ç»“æœå°†åœ¨è¿™é‡Œç”Ÿæˆ -->
            </div>
        </div>

        <!-- ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®é™…åˆ©æ¶¦å¤ç›˜ -->
        <div class="card">
            <h2>å®é™…åˆ©æ¶¦å¤ç›˜</h2>
            <div class="section-desc">è¾“å…¥å®é™…å‘ç”Ÿé‡‘é¢ï¼Œè®¡ç®—æœ€ç»ˆåˆ†æˆ</div>
            <div class="form-group">
                <label>å®¢æˆ·å®é™…æ”¶è´¹ (å…ƒ)</label>
                <input type="number" id="realCharge" placeholder="å®¢æˆ·ä»˜äº†å¤šå°‘é’±">
            </div>
            <div class="form-group">
                <label>æ°´æ™¶å®é™…è¿›ä»· (å…ƒ)</label>
                <input type="number" id="realCrystalPrice" placeholder="è¿›è´§èŠ±äº†å¤šå°‘é’±">
            </div>
            <div class="form-group">
                <label>å®é™…é‚®è´¹ (å…ƒ)</label>
                <input type="number" id="realPostage" placeholder="å¿«é€’è´¹">
            </div>
            <button onclick="calculateRealProfit()">è®¡ç®—å®é™…åˆ©æ¶¦</button>

            <div id="resultReal" class="result-box">
                <!-- ç»“æœå°†åœ¨è¿™é‡Œç”Ÿæˆ -->
            </div>
        </div>

    </div>

    <script>
        // ç¬¬ä¸€éƒ¨åˆ†ï¼šé¢„ç®—è®¡ç®—é€»è¾‘
        function calculateBudget() {
            const budget = parseFloat(document.getElementById('budgetPrice').value);
            
            if (isNaN(budget)) {
                alert("è¯·è¾“å…¥æœ‰æ•ˆçš„é¢„ç®—ä»·æ ¼");
                return;
            }

            // å¸¸é‡å®šä¹‰
            const feeDaoGuan = 100;
            const feePlatformConsult = 100;
            const feePostage = 40;
            const feeCheMa = 50;

            // 4. æ°´æ™¶ä»·æ ¼è®¡ç®—
            // åŸå§‹å…¬å¼: (é¢„ç®— - 100 - 100 - 40 - 50) / 2
            let crystalPrice = (budget - feeDaoGuan - feePlatformConsult - feePostage - feeCheMa) / 2;
            
            // é™åˆ¶ï¼šæ°´æ™¶ä»·æ ¼æœ€é«˜åªåˆ°é¢„ç®—ä»·æ ¼çš„ä¸€åŠ (è™½ç„¶ä¸Šé¢çš„å…¬å¼é™¤ä»¥2å·²ç»éšå«äº†è¿™ä¸ªè¶‹åŠ¿ï¼Œä½†å¦‚æœæ‚è´¹å æ¯”å¾ˆä½ï¼Œå¯èƒ½éœ€è¦é¢å¤–æ£€æŸ¥ï¼Œä¸è¿‡æ ¹æ®å…¬å¼é€»è¾‘ï¼Œ(Total - Fees)/2 è‚¯å®šå°äº Total/2ï¼Œé™¤éFeesä¸ºè´Ÿæ•°ã€‚è¿™é‡Œéµå¾ªå…¬å¼é€»è¾‘å³å¯)
            // å¦‚æœé¢˜ç›®æ„æ€æ˜¯â€œæ°´æ™¶ä»·æ ¼ä¸èƒ½è¶…è¿‡é¢„ç®—çš„ä¸€åŠâ€ï¼Œä¸Šé¢çš„å…¬å¼ (B-F)/2 æ’å°äº B/2ã€‚
            // ä¿æŒä¸Šé¢çš„è®¡ç®—å…¬å¼ä¸ºå‡†ã€‚
            if (crystalPrice < 0) crystalPrice = 0; // é˜²æ­¢è´Ÿæ•°

            // 5. ä¸œæµ·æŠ½ç‚¹
            const dongHaiCut = crystalPrice * 0.1;

            // 6. æ‰“å·¥äººæŠ½ç‚¹
            const workerCut = crystalPrice * 0.1;

            // 8. æ•´ä½“é¢„ä¼°åˆ©æ¶¦
            // å…¬å¼: é¢„ç®— - æ°´æ™¶ - ä¸œæµ· - æ‰“å·¥äºº - é‚®è´¹ - è½¦é©¬ - é“è§‚ - å’¨è¯¢
            const totalProfit = budget - crystalPrice - dongHaiCut - workerCut - feePostage - feeCheMa - feeDaoGuan - feePlatformConsult;

            // 9. æ‰“å·¥äººåˆ©æ¶¦åˆ†æˆ
            const workerProfitShare = totalProfit * 0.1;

            // 10. å®¢æˆ·æ¥æºé¢„ä¼°åˆ©æ¶¦
            const sourceProfit = totalProfit * 0.4;

            // 11. å¹³å°é¢„ä¼°åˆ©æ¶¦
            const platformProfit = totalProfit * 0.4;

            // 12. å¹³å°é¢„ä¼°æ€»æ”¶ç›Š
            const platformTotalIncome = platformProfit + feePlatformConsult; // +100

            // 13. æ‰“å·¥äººé¢„ä¼°æ€»æ”¶å…¥
            const workerTotalIncome = workerCut + workerProfitShare;

            // 14. å‘ŠçŸ¥å®¢æˆ·åŒºé—´
            // (é¢„ç®— - é“è§‚ - å’¨è¯¢) / 1.1
            const customerRangePrice = (budget - feeDaoGuan - feePlatformConsult) / 1.1;

            // æ ¼å¼åŒ–å‡½æ•°
            const fmt = (num) => num.toFixed(2);

            // æ„å»ºHTML
            const html = `
                <div class="result-item"><span>é“è§‚å¼€å…‰è´¹</span><span>${fmt(feeDaoGuan)}</span></div>
                <div class="result-item"><span>å¹³å°å’¨è¯¢è´¹</span><span>${fmt(feePlatformConsult)}</span></div>
                <div class="result-item"><span>é¢„ä¼°é‚®è´¹</span><span>${fmt(feePostage)}</span></div>
                <div class="result-item"><span>è½¦é©¬è´¹</span><span>${fmt(feeCheMa)}</span></div>
                <div class="result-item"><span>ä¸œæµ·æŠ½ç‚¹</span><span>${fmt(dongHaiCut)}</span></div>
                <div class="result-item"><span>æ‰“å·¥äººæŠ½ç‚¹</span><span>${fmt(workerCut)}</span></div>
                <div class="result-item highlight-important"><span>æ°´æ™¶ä»·æ ¼ (æˆæœ¬)</span><span>${fmt(crystalPrice)}</span></div>
                <div class="result-item"><span>æ•´ä½“é¢„ä¼°åˆ©æ¶¦</span><span>${fmt(totalProfit)}</span></div>
                <div class="result-item highlight-important"><span>å®¢æˆ·æ¥æºé¢„ä¼°åˆ©æ¶¦ (40%)</span><span>${fmt(sourceProfit)}</span></div>
                <div class="result-item"><span>å¹³å°é¢„ä¼°åˆ©æ¶¦</span><span>${fmt(platformProfit)}</span></div>
                <div class="result-item"><span>å¹³å°é¢„ä¼°æ€»æ”¶ç›Š</span><span>${fmt(platformTotalIncome)}</span></div>
                <div class="result-item highlight-important"><span>æ‰“å·¥äººé¢„ä¼°æ€»æ”¶å…¥</span><span>${fmt(workerTotalIncome)}</span></div>
                
                <div class="highlight-notice">
                    é¢„ç®—é™¤æ‰100å®šåˆ¶è´¹å’Œ100çš„å¼€å…‰è´¹åï¼Œä¼šç»™ä½ æ‰¾è¿›è´§ä»·åœ¨ <strong>${fmt(customerRangePrice)}</strong> å·¦å³çš„æ°´æ™¶ã€‚ä¸œæµ·æ°´æ™¶åŸä¾›è´§é‚£è¾¹è¦æœ‰10%å·¦å³çš„åˆ©æ¶¦ã€‚
                </div>
            `;

            const resultBox = document.getElementById('resultBudget');
            resultBox.innerHTML = html;
            resultBox.style.display = 'block';
        }

        // ç¬¬äºŒéƒ¨åˆ†ï¼šæŠ¥ä»·è®¡ç®—é€»è¾‘
        function calculateQuote() {
            const price = parseFloat(document.getElementById('crystalBasePrice').value);
            
            if (isNaN(price)) {
                alert("è¯·è¾“å…¥æ°´æ™¶è¿›è´§ä»·æ ¼");
                return;
            }

            // æŠ¥ä»· = æ°´æ™¶ä»·æ ¼*2 + è½¦é©¬è´¹50 + é‚®è´¹40 + å¼€å…‰å®šåˆ¶200
            const quote = (price * 2) + 50 + 40 + 200;

            const html = `
                <div class="result-item" style="justify-content: center; border:none;">
                    <span>å»ºè®®ç»™å®¢æˆ·æŠ¥ä»·ï¼š</span>
                </div>
                <div class="highlight-price-show">Â¥ ${quote.toFixed(0)}</div>
                <div style="text-align:center; font-size:12px; color:#999;">(å·²åŒ…å«æ‰€æœ‰éšå½¢æˆæœ¬ä¸æº¢ä»·)</div>
            `;

            const resultBox = document.getElementById('resultQuote');
            resultBox.innerHTML = html;
            resultBox.style.display = 'block';
        }

        // ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®é™…åˆ©æ¶¦å¤ç›˜é€»è¾‘
        function calculateRealProfit() {
            const charge = parseFloat(document.getElementById('realCharge').value);
            const crystalCost = parseFloat(document.getElementById('realCrystalPrice').value);
            const postage = parseFloat(document.getElementById('realPostage').value);

            if (isNaN(charge) || isNaN(crystalCost) || isNaN(postage)) {
                alert("è¯·å¡«å†™æ‰€æœ‰é‡‘é¢å­—æ®µ");
                return;
            }

            // å¸¸é‡
            const feeDaoGuan = 100;
            const feePlatformConsult = 100;
            const feeCheMa = 50;

            // 1. ä¸œæµ·æŠ½ç‚¹
            const dongHaiCut = crystalCost * 0.1;
            
            // 2. æ‰“å·¥äººæŠ½ç‚¹
            const workerCut = crystalCost * 0.1;

            // 6. æ•´ä½“åˆ©æ¶¦ (æ ¹æ®éœ€æ±‚æè¿°é‡æ–°æ¢³ç†å…¬å¼é¡ºåº)
            // æ•´ä½“åˆ©æ¶¦ = å®¢æˆ·æ”¶è´¹ - æ°´æ™¶å®é™…ä»·æ ¼ - å®é™…é‚®è´¹ - ä¸œæµ·æŠ½ç‚¹ - æ‰“å·¥äººæŠ½ç‚¹ - é“è§‚å¼€å…‰è´¹ - è½¦é©¬è´¹ - å¹³å°å’¨è¯¢è´¹
            const totalProfit = charge - crystalCost - postage - dongHaiCut - workerCut - feeDaoGuan - feeCheMa - feePlatformConsult;

            // 7. æ‰“å·¥äººåˆ©æ¶¦åˆ†æˆ
            const workerProfitShare = totalProfit * 0.1;

            // 8. å®¢æˆ·æ¥æºåˆ©æ¶¦
            const sourceProfit = totalProfit * 0.4;

            // 9. å¹³å°åˆ©æ¶¦
            const platformProfit = totalProfit * 0.4;

            // 10. æ‰“å·¥äººæ€»æ”¶å…¥
            const workerTotalIncome = workerCut + workerProfitShare;

            // 15. å¹³å°æ€»æ”¶ç›Š
            const platformTotalIncome = platformProfit + feePlatformConsult;

            // æ ¼å¼åŒ–
            const fmt = (num) => num.toFixed(2);

            const html = `
                <div class="result-item"><span>å®¢æˆ·å®é™…æ”¶è´¹</span><span>${fmt(charge)}</span></div>
                <div class="result-item"><span>é“è§‚å¼€å…‰è´¹</span><span>${fmt(feeDaoGuan)}</span></div>
                <div class="result-item"><span>å¹³å°å’¨è¯¢è´¹</span><span>${fmt(feePlatformConsult)}</span></div>
                <div class="result-item"><span>è½¦é©¬è´¹</span><span>${fmt(feeCheMa)}</span></div>
                <div class="result-item"><span>å®é™…é‚®è´¹</span><span>${fmt(postage)}</span></div>
                <div class="result-item"><span>æ°´æ™¶å®é™…ä»·æ ¼</span><span>${fmt(crystalCost)}</span></div>
                <div class="result-item"><span>ä¸œæµ·æŠ½ç‚¹</span><span>${fmt(dongHaiCut)}</span></div>
                <div class="result-item"><span>æ‰“å·¥äººæŠ½ç‚¹</span><span>${fmt(workerCut)}</span></div>
                <div class="result-item"><span>æ•´ä½“åˆ©æ¶¦</span><span>${fmt(totalProfit)}</span></div>
                <div class="result-item highlight-important"><span>å®¢æˆ·æ¥æºåˆ©æ¶¦</span><span>${fmt(sourceProfit)}</span></div>
                <div class="result-item"><span>å¹³å°åˆ©æ¶¦</span><span>${fmt(platformProfit)}</span></div>
                <div class="result-item highlight-important"><span>å¹³å°æ€»æ”¶ç›Š</span><span>${fmt(platformTotalIncome)}</span></div>
                <div class="result-item highlight-important"><span>æ‰“å·¥äººæ€»æ”¶å…¥</span><span>${fmt(workerTotalIncome)}</span></div>
            `;

            const resultBox = document.getElementById('resultReal');
            resultBox.innerHTML = html;
            resultBox.style.display = 'block';
        }
    </script>
</body>
</html>
